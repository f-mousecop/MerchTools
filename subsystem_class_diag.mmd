---
config:
    theme: default
    look: classic
    layout: elk
---
classDiagram
direction LR
    %% High-level subsystems
    class ScannerSearch { <<subsystem>> }
    class AuditCapture { <<subsystem>> }
    class ReportGenerator { <<subsystem>> }
    class Share { <<subsystem>> }
    class History { <<subsystem>> }
    

    %% Data + Platform
    namespace DataLayer {
        class RoomStore { 
            <<abstract>> 
            Room Entities/DAOs
            [Store, Section, Audit, AuditItem, Photo, Sku]
            }
        class RepositoryImpl {
            <<abstract>>
            Repository Implementatons
        }
    }

    namespace PlatformServices {
        class CameraService {
            <<abstract>>
            CameraX, ML Kit
        }
        class PdfService {
            <<abstract>>
            Pdfdocument / WebView Print
        }
        class ShareService {
            <<abstract>>
            ShareSheet
        }
        class IoServices {
            <<abstract>>
            File I/O, Permissions, Time
        }
    }

    %% Subsystems -> Data/Platform dependencies
    ScannerSearch --> RoomStore : SKU lookup
    ScannerSearch --> CameraService : camera/barcode

    AuditCapture --> RoomStore : create/update audits
    AuditCapture --> CameraService
    AuditCapture --> IoServices : file I/O, permissions

    ReportGenerator --> RoomStore : read audits/items
    ReportGenerator --> PdfService
    ReportGenerator --> IoServices : time, file I/O

    Share --> ShareService : Android Sharesheet

    History --> RoomStore : list prior audits